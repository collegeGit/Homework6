<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>–§–æ–Ω–æ–≤–∞ –º—É–∑–∏–∫–∞ –∑ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º</title>
    <style>
        #playIndicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: gray;
            margin-left: 10px;
            vertical-align: middle;
        }
    </style>
</head>
<body>

<h3>–§–æ–Ω–æ–≤–∞ –º—É–∑–∏–∫–∞
    <div id="playIndicator"></div>
</h3>

<button id="toggleMusic">‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—É–∑–∏–∫—É</button>
<button id="globalSound"> –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫</button>
<br><br>

<label for="volumeControl">–ì—É—á–Ω—ñ—Å—Ç—å:</label>
<input type="range" id="volumeControl" min="0" max="1" step="0.01" value="0.5">

<script>
    const backgroundMusic = new Audio("3-jungle-the-amazon.mp3");
    backgroundMusic.loop = true;
    backgroundMusic.volume = 0.5;

    const toggleButton = document.getElementById("toggleMusic");
    const volumeSlider = document.getElementById("volumeControl");
    const indicator = document.getElementById("playIndicator");
    const globalSoundButton = document.getElementById("globalSound");

    let isSoundOn = true;

    function updateIndicator() {
        if (!isSoundOn || backgroundMusic.paused || backgroundMusic.volume === 0) {
            indicator.style.backgroundColor = "gray";
        } else {
            indicator.style.backgroundColor = "green";
        }
    }

    toggleButton.addEventListener("click", () => {
        if (!isSoundOn) return;
        if (backgroundMusic.paused) {
            backgroundMusic.play().catch(err => console.log(err));
            toggleButton.textContent = "‚è∏ –ó—É–ø–∏–Ω–∏—Ç–∏ –º—É–∑–∏–∫—É";
        } else {
            backgroundMusic.pause();
            toggleButton.textContent = "‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—É–∑–∏–∫—É";
        }
        updateIndicator();
    });

    globalSoundButton.addEventListener("click", () => {
        isSoundOn = !isSoundOn;
        if (!isSoundOn) {
            backgroundMusic.pause();
            toggleButton.textContent = "‚ñ∂ –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –º—É–∑–∏–∫—É";
        }
        globalSoundButton.textContent = isSoundOn ? "üîä –£–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫" : "üîá –í–∏–º–∫–Ω—É—Ç–∏ –∑–≤—É–∫";
        updateIndicator();
    });

    volumeSlider.addEventListener("input", (event) => {
        backgroundMusic.volume = event.target.value;
        updateIndicator();
    });

    backgroundMusic.addEventListener("play", updateIndicator);
    backgroundMusic.addEventListener("pause", updateIndicator);

    updateIndicator();
</script>

</body>
</html>
